{
    "version": "1.1",
    "description": "A simple GUI wrapper for youtube-dl",
    "homepage": "https://github.com/database64128/youtube-dl-wpf",
    "license": "GPL-3.0-or-later",
    "depends": [
        "youtube-dl",
        "sushi/dotnet-desktop-runtime"
    ],
    "suggest": {
        "FFmpeg": [
            "ffmpeg",
            "ffmpeg-nightly"
        ]
    },
    "architecture": {
        "64bit": {
            "url": "https://github.com/database64128/youtube-dl-wpf/releases/download/v1.1/youtube-dl-wpf-v1.1-20200715.7z",
            "hash": "07cbf36aa6250df9a477b5a633f8dad1c39e3a7b3b5ab42a5f2d4780e4427a90"
        }
    },
    "installer": {
        "script": [
            "$ffmpeg = ''",
            "if (Test-Path (appdir ffmpeg $global)) {",
            "    $ffmpeg = \"$(appdir ffmpeg $global)\\current\\bin\\ffmpeg.exe\"",
            "} elseif (Test-Path (appdir ffmpeg-nightly $global)) {",
            "    $ffmpeg = \"$(appdir ffmpeg-nightly $global)\\current\\bin\\ffmpeg.exe\"",
            "}",
            "@{",
            "    'AutoUpdateDl' = $false",
            "    'DlPath' = \"$(appdir 'youtube-dl' $global)\\current\\youtube-dl.exe\"",
            "    'FfmpegPath' = $ffmpeg",
            "} | ConvertTo-Json | Out-File \"$dir\\Settings.json\" -Encoding ascii"
        ]
    },
    "shortcuts": [
        [
            "youtube-dl-wpf.exe",
            "Cube YouTube Downloader"
        ]
    ],
    "persist": "Settings.json",
    "checkver": {
        "url": "https://github.com/database64128/youtube-dl-wpf/releases",
        "regex": "youtube-dl-wpf-v(?<version>[\\d.]+)-(?<date>\\d{8})"
    },
    "autoupdate": {
        "url": "https://github.com/database64128/youtube-dl-wpf/releases/download/v$version/youtube-dl-wpf-v$version-$matchDate.7z"
    }
}
